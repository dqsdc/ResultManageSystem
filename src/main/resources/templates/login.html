<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>欢迎登录教师成果管理系统</title>
    <link href="mis/css/old-style.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="easyform/js/easyform/easyform.css" >
    <script src="easyform/js/jquery-2.1.0.min.js" type="text/javascript"></script>
    <script src="mis/js/cloud.js" type="text/javascript"></script>
    <style type="text/css">
        .systemlogo{
            height: 105px;
        }
    </style>
</head>
<body style="background-color:#1c77ac; background-image:url(mis/images/light.png); background-repeat:no-repeat; background-position:center top; overflow:hidden;">
<div id="mainBody">
    <div id="cloud1" class="cloud"></div>
    <div id="cloud2" class="cloud"></div>
</div>
<div class="logintop">
    <span>欢迎登录计算机科学与技术学院成果管理系统</span>

</div>

<div class="loginbody">

    <span  class="systemlogo"></span>

    <div class="loginbox">
<form id="form-login" method="post" >
        <ul>
            <li><input name="account" type="text" class="loginuser" id="account"/>
                       <!--data-easyform="length:4 16;number;real-time;"-->
                       <!--data-message="账号必须为4—16位的数字"-->
                       <!--data-easytip="position:right;class:easy-red;" -->
                      </li>
            <li><input name="password" type="password" class="loginpwd" id="password">
                       <!--data-easyform="length:6 16;real-time;"-->
                       <!--data-message="密码必须为6—16位"-->
                       <!--data-easytip="position:right;class:easy-red;">-->
            </li>
            <li>
                <!--<input  type="submit" class="loginbtn" value="登录" />-->
                <button type="button" class="btn btn-primary" id="btn">确定</button>
            </li>
        </ul>
</form>
    </div>
</div>
<div class="loginbm">版权所有</div>
</body>
<script src="easyform/js/easyform/easyform.js" type="text/javascript"></script>
<script>
    /*<![CDATA[*/

    $("#btn").click(function () {
        var data = $("#form-login").serialize();
        console.log(data);
        submit(data);
    });

    function submit(data) {
        $.ajax({
            url: '/loginSub', // ajax 请求地址
            type: 'post',//请求方式 ’GET‘或’POST‘，默认为’GET‘。
            data: data,
            dataType: "text",//根据返回数据类型，可以有如下数据可选：xml html script json jsonp text
            //请求成功后的回调函数
            success: function (data) {
                console.log(data);
                if(data==='admin'){
                    alert("管理员登录成功");
                    window.location.href="/adminIndex";
                }else {
                    alert(data);
                    if (data==='登录成功'){
                        window.location.href="/main";
                    }
                }
            },
            //请求失败时调用此函数。有以下三个参数：XMLHttpRequest 对象、错误信息、（可选）捕获的异常对象。
            error: function (data) {
                console.log(data);// 打印错误信息
            }
        });

    }
    /*]]>*/
</script>
<script >
    $(function(){
        var v = $('#form-login').easyform();

        $('.loginbox').css({'position':'absolute','left':($(window).width()-692)/2});
        $(window).resize(function(){
            $('.loginbox').css({'position':'absolute','left':($(window).width()-692)/2});
        });
    });
</script>
</html>
